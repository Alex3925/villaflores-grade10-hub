<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Villaflores College - Grade 10 Hub</title>
    
    <link rel="icon" type="image/x-icon" href="https://villaflorescollege.s3.us-west-2.amazonaws.com/favicons/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="https://villaflorescollege.s3.us-west-2.amazonaws.com/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://villaflorescollege.s3.us-west-2.amazonaws.com/favicons/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="https://villaflorescollege.s3.us-west-2.amazonaws.com/favicons/apple-touch-icon.png">
    <link rel="manifest" href="https://villaflorescollege.s3.us-west-2.amazonaws.com/favicons/site.webmanifest">
    
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #00d4ff;
            --secondary: #ff007a;
            --accent: #ffaa00;
            --dark: #0a0f1a;
            --light: #f0f4f8;
            --glow: rgba(0, 212, 255, 0.7);
        }
        [data-theme="dark"] {
            --light: #0a0f1a;
            --dark: #f0f4f8;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', sans-serif; }
        body {
            min-height: 100vh; display: flex; flex-direction: column;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: var(--dark); overflow-x: hidden;
        }
        .particles {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 0;
        }
        .container {
            max-width: 1200px; margin: 0 auto; padding: 2rem;
            text-align: center; flex: 1; position: relative; z-index: 1;
        }
        .logo {
            max-width: 300px; filter: drop-shadow(0 0 10px var(--glow));
            animation: pulse 2s infinite alternate;
        }
        h1 {
            font-family: 'Orbitron', sans-serif; font-size: 3.5rem; font-weight: 700;
            margin: 1.5rem 0; text-shadow: 0 0 15px var(--glow);
            animation: fadeIn 1.5s ease-out;
        }
        .countdown {
            font-size: 1.5rem; margin: 1rem 0; color: var(--accent);
            animation: bounce 1.5s infinite;
        }
        p { font-size: 1.2rem; max-width: 600px; margin: 0 auto 2rem; line-height: 1.6; }
        .action-buttons { display: flex; gap: 1rem; flex-wrap: wrap; justify-content: center; }
        .contact, .login-btn {
            padding: 1rem 2.5rem; background: var(--primary);
            color: var(--light); text-decoration: none; border-radius: 25px;
            font-weight: 600; transition: transform 0.3s, box-shadow 0.3s;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        .contact:hover, .login-btn:hover {
            transform: translateY(-5px); box-shadow: 0 8px 20px var(--glow);
        }
        .theme-toggle {
            position: absolute; top: 1rem; right: 1rem;
            background: var(--primary); color: var(--light);
            border: none; border-radius: 50%; width: 40px; height: 40px;
            font-size: 1.2rem; cursor: pointer; transition: transform 0.3s;
        }
        .theme-toggle:hover { transform: scale(1.2); }
        footer {
            text-align: center; padding: 1rem; background: rgba(10, 15, 26, 0.9);
            backdrop-filter: blur(10px); color: var(--light); font-size: 0.9rem;
        }
        @keyframes pulse { to { transform: scale(1.05); } }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        @media (max-width: 600px) {
            h1 { font-size: 2.5rem; }
            .logo { max-width: 200px; }
            .action-buttons { flex-direction: column; }
            .contact, .login-btn { width: 100%; }
        }
    </style>
</head>
<body data-theme="light">
    <canvas class="particles"></canvas>
    <button class="theme-toggle" aria-label="Toggle theme" onclick="toggleTheme()">ðŸŒ™</button>
    <div class="container">
        <img src="https://villaflorescollege.s3.us-west-2.amazonaws.com/SCHOOL_LOGO.png" alt="Villaflores College Logo" class="logo">
        <h1>Welcome to Grade 10 Hub</h1>
        <div class="countdown" id="countdown">Launching in: 7 days, 12 hours, 3 minutes</div>
        <p>Step into a vibrant space to collaborate, share resources, and connect with classmates. Experience a cutting-edge platform designed just for you!</p>
        <div class="action-buttons">
            <a href="mailto:info@villaflorescollege.edu.ph" class="contact">Contact Us</a>
            <a href="#" class="login-btn" onclick="openModal()">Enter the Hub</a>
        </div>
    </div>
    <footer>&copy; 2025 Villaflores College. All Rights Reserved.</footer>

    <div id="loginModal" class="modal" role="dialog" aria-labelledby="loginModalLabel">
        <div class="modal-content">
            <span class="close" aria-label="Close" onclick="closeModal()">&times;</span>
            <h2 id="loginModalLabel">Enter Grade 10 Hub</h2>
            <form id="loginForm">
                <label for="username">Username or Email</label>
                <input type="text" id="username" name="username" required aria-describedby="username-error">
                <div class="error-message" id="username-error">Please enter a username or email.</div>
                <label for="password">Password</label>
                <div class="password-container">
                    <input type="password" id="password" name="password" required aria-describedby="password-error">
                    <span class="toggle-password" onclick="togglePassword()">Show</span>
                </div>
                <div class="error-message" id="password-error">Please enter a password.</div>
                <div class="error-message" id="server-error"></div>
                <button type="submit" id="loginButton">Enter</button>
                <a href="mailto:info@villaflorescollege.edu.ph?subject=Forgot%20Password" class="forgot-password">Forgot Password?</a>
            </form>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/particles.js/2.0.0/particles.min.js"></script>
    <script>
        particlesJS('particles', {
            particles: { number: { value: 80 }, color: { value: '#00d4ff' }, shape: { type: 'circle' }, opacity: { value: 0.5 }, size: { value: 3 }, move: { speed: 2 } },
            interactivity: { detectsOn: 'canvas', modes: { repulse: { distance: 100 } } }
        });

        function toggleTheme() {
            const body = document.body;
            const theme = body.getAttribute('data-theme') === 'light' ? 'dark' : 'light';
            body.setAttribute('data-theme', theme);
            localStorage.setItem('theme', theme);
            document.querySelector('.theme-toggle').textContent = theme === 'light' ? 'ðŸŒ™' : 'â˜€ï¸';
        }

        if (localStorage.getItem('theme') === 'dark') {
            document.body.setAttribute('data-theme', 'dark');
            document.querySelector('.theme-toggle').textContent = 'â˜€ï¸';
        }

        function openModal() { /* [Previous modal logic remains unchanged] */ }
        function closeModal() { /* [Previous modal logic remains unchanged] */ }
        function togglePassword() { /* [Previous modal logic remains unchanged] */ }

        document.getElementById('loginForm').addEventListener('submit', async function(event) {
            event.preventDefault();
            let valid = true;
            const username = document.getElementById('username');
            const password = document.getElementById('password');
            const usernameError = document.getElementById('username-error');
            const passwordError = document.getElementById('password-error');
            const serverError = document.getElementById('server-error');
            const loginButton = document.getElementById('loginButton');

            usernameError.style.display = 'none';
            passwordError.style.display = 'none';
            serverError.style.display = 'none';
            username.classList.remove('error');
            password.classList.remove('error');

            if (!username.value.trim()) {
                usernameError.style.display = 'block';
                username.classList.add('error');
                valid = false;
            }
            if (!password.value.trim()) {
                passwordError.style.display = 'block';
                password.classList.add('error');
                valid = false;
            }

            if (!valid) return;

            loginButton.disabled = true;
            loginButton.textContent = 'Entering...';

            try {
                const response = await fetch('/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ username: username.value.trim(), password: password.value.trim() })
                });
                const data = await response.json();

                if (response.ok) {
                    localStorage.setItem('token', data.token);
                    localStorage.setItem('username', data.username);
                    closeModal();
                    window.location.href = '/chat.html';
                } else {
                    serverError.textContent = data.error || 'Login failed. Please try again.';
                    serverError.style.display = 'block';
                }
            } catch (error) {
                console.error('Login error:', error);
                serverError.textContent = 'Network error: Unable to connect to server.';
                serverError.style.display = 'block';
            } finally {
                loginButton.disabled = false;
                loginButton.textContent = 'Enter';
            }
        });

        window.onclick = function(event) { /* [Previous modal logic remains unchanged] */ }
        document.addEventListener('keydown', (event) => { /* [Previous modal logic remains unchanged] */ });

        // Countdown Timer (example: 7 days from now)
        function updateCountdown() {
            const launchDate = new Date();
            launchDate.setDate(launchDate.getDate() + 7);
            const now = new Date();
            const diff = launchDate - now;
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            document.getElementById('countdown').textContent = `Launching in: ${days} days, ${hours} hours, ${minutes} minutes`;
        }
        setInterval(updateCountdown, 60000);
        updateCountdown();
    </script>
</body>
</html>
